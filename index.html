<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VerbeMente - Spanish Verbs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --surface: #1e293b;
            --surface-dark: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.8);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        [data-theme="light"] {
            --surface: #f8fafc;
            --surface-dark: #f1f5f9;
            --card-bg: rgba(255, 255, 255, 0.8);
            --text-primary: #1e293b;
            --text-secondary: rgba(30, 41, 59, 0.7);
        }

        body {
            background: linear-gradient(180deg, var(--surface) 0%, var(--surface-dark) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .card-3d {
            perspective: 2500px;
            perspective-origin: 50% 50%;
            transform-style: preserve-3d;
        }

        .card-inner {
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }

        .card-inner.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1.5rem;
            padding: 2rem;
            background: var(--card-bg);
            border: 1px solid rgba(129, 140, 248, 0.1);
            box-shadow: 
                0 4px 6px -1px rgba(0, 0, 0, 0.1),
                0 2px 4px -1px rgba(0, 0, 0, 0.06),
                0 0 0 1px rgba(129, 140, 248, 0.1);
            backdrop-filter: blur(10px);
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .language-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }

        .badge-es {
            background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
            color: white;
        }

        .badge-it {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .progress-bar {
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            background: rgba(129, 140, 248, 0.1);
            border: 1px solid rgba(129, 140, 248, 0.2);
            color: var(--text-primary);
        }

        .control-btn:hover {
            background: rgba(129, 140, 248, 0.2);
            transform: translateY(-1px);
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        }

        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }

        .flip-hint {
            animation: gentle-bounce 2s infinite;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .flip-hint:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [isSpanishToItalian, setIsSpanishToItalian] = useState(true);
            const [isDarkTheme, setIsDarkTheme] = useState(true);
            const [cardScores, setCardScores] = useState(() => {
                // Initialize from localStorage or empty object if none exists
                const saved = localStorage.getItem('verbeMenteScores');
                return saved ? JSON.parse(saved) : {};
            });

            // Save scores to localStorage whenever they change
            useEffect(() => {
                localStorage.setItem('verbeMenteScores', JSON.stringify(cardScores));
            }, [cardScores]);

            const handleScore = (score) => {
                const cardId = cardsData[currentIndex].spanish; // Using Spanish word as unique identifier
                setCardScores(prev => ({
                    ...prev,
                    [cardId]: {
                        score: score,
                        lastSeen: new Date().toISOString(),
                        timesReviewed: (prev[cardId]?.timesReviewed || 0) + 1
                    }
                }));
                nextCard();
            };

            const nextCard = () => {
                setIsFlipped(false);
                setCurrentIndex((prev) => (prev + 1) % cardsData.length);
            };

            const prevCard = () => {
                setIsFlipped(false);
                setCurrentIndex((prev) => (prev - 1 + cardsData.length) % cardsData.length);
            };

            // Keyboard navigation
            useEffect(() => {
                const handleKeyPress = (e) => {
                    if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        nextCard();
                    } else if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        prevCard();
                    } else if (e.key === ' ') {
                        e.preventDefault();
                        setIsFlipped(prev => !prev);
                    }
                };

                window.addEventListener('keydown', handleKeyPress);
                return () => window.removeEventListener('keydown', handleKeyPress);
            }, []);  // Empty dependency array since we don't need to recreate the handler

            // Theme toggling effect
            useEffect(() => {
                document.documentElement.setAttribute('data-theme', isDarkTheme ? 'dark' : 'light');
            }, [isDarkTheme]);

            const toggleTheme = () => {
                setIsDarkTheme(!isDarkTheme);
            };

            // Sample cards data
            const cardsData = [
                { spanish: "ser", italian: "essere", meaning: "to be (permanent)" },
                { spanish: "estar", italian: "essere / stare", meaning: "to be (temporary/location)" },
                // Add more cards as needed
            ];

            return (
                <div className="container mx-auto px-4 py-8">
                    <div className="text-center mb-12">
                        <h1 className="text-5xl font-bold mb-2" style={{ color: 'var(--text-primary)' }}>
                            VerbeMente
                        </h1>
                        <p style={{ color: 'var(--text-secondary)' }}>
                            Spanish Verbs for Italian Speakers
                        </p>
                    </div>

                    {/* Controls */}
                    <div className="flex justify-center gap-4 mb-8">
                        {/* Theme Toggle */}
                        <button 
                            className="control-btn"
                            onClick={toggleTheme}
                            title={isDarkTheme ? "Switch to light mode" : "Switch to dark mode"}
                        >
                            {isDarkTheme ? (
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                                    />
                                </svg>
                            ) : (
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                                    />
                                </svg>
                            )}
                        </button>

                        {/* Language Toggle */}
                        <button 
                            className="control-btn"
                            onClick={() => setIsSpanishToItalian(!isSpanishToItalian)}
                            title="Switch languages"
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                    d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
                                />
                            </svg>
                        </button>

                        {/* Navigation */}
                        <button 
                            className="control-btn nav-btn"
                            onClick={prevCard}
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                            </svg>
                        </button>
                        <button 
                            className="control-btn nav-btn"
                            onClick={nextCard}
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>

                    {/* Progress bar */}
                    <div className="max-w-2xl mx-auto mb-8">
                        <div className="flex justify-between mb-2">
                            <span style={{ color: 'var(--text-secondary)' }}>
                                Card {currentIndex + 1} of {cardsData.length}
                            </span>
                            <span style={{ color: 'var(--text-secondary)' }}>
                                {isSpanishToItalian ? 'Spanish → Italian' : 'Italian → Spanish'}
                            </span>
                        </div>
                        <div className="w-full bg-gray-700/20 rounded-full h-1">
                            <div 
                                className="progress-bar"
                                style={{ width: `${((currentIndex + 1) / cardsData.length) * 100}%` }}
                            />
                        </div>
                    </div>

                    {/* Flashcard */}
                    <div className="max-w-2xl mx-auto h-96 card-3d">
                        <div 
                            className={`card-inner h-full ${isFlipped ? 'flipped' : ''}`}
                            onClick={() => setIsFlipped(!isFlipped)}
                        >
                            <div className="card-face flex items-center justify-center">
                                <div className={`language-badge ${isSpanishToItalian ? 'badge-es' : 'badge-it'}`}>
                                    {isSpanishToItalian ? 'ES' : 'IT'}
                                </div>
                                <div className="text-center">
                                    <h2 className="text-6xl font-bold mb-6">
                                        {isSpanishToItalian 
                                            ? cardsData[currentIndex].spanish 
                                            : cardsData[currentIndex].italian}
                                    </h2>
                                    <div className="flip-hint flex items-center justify-center gap-2">
                                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                                            />
                                        </svg>
                                        <span>Tap to reveal</span>
                                    </div>
                                </div>
                            </div>
                            <div className="card-face card-back flex items-center justify-center">
                                <div className={`language-badge ${!isSpanishToItalian ? 'badge-es' : 'badge-it'}`}>
                                    {!isSpanishToItalian ? 'ES' : 'IT'}
                                </div>
                                <div className="text-center">
                                    <h2 className="text-5xl font-bold mb-4">
                                        {isSpanishToItalian 
                                            ? cardsData[currentIndex].italian 
                                            : cardsData[currentIndex].spanish}
                                    </h2>
                                    <p className="text-xl mb-8" style={{ color: 'var(--text-secondary)' }}>
                                        {cardsData[currentIndex].meaning}
                                    </p>
                                    <div className="flex gap-3 mt-4">
                                        <button 
                                            onClick={(e) => {
                                                e.stopPropagation(); // Prevent card flip
                                                handleScore(1);
                                            }}
                                            className="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors"
                                        >
                                            Again
                                        </button>
                                        <button 
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                handleScore(2);
                                            }}
                                            className="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors"
                                        >
                                            Hard
                                        </button>
                                        <button 
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                handleScore(3);
                                            }}
                                            className="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors"
                                        >
                                            Good
                                        </button>
                                        <button 
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                handleScore(4);
                                            }}
                                            className="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors"
                                        >
                                            Easy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
